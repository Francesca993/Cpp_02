# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: francesca <francesca@student.42.fr>        +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2025/12/01 10:19:10 by francesca         #+#    #+#              #
#    Updated: 2025/12/18 09:30:53 by francesca        ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Colors for Output
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
GREEN		=	\033[0;32m
YELLOW		=	\033[0;33m
RED			=	\033[0;31m
BLUE		=	\033[0;34m
MAGENTA		=	\033[0;35m
CYAN		=	\033[0;36m
RESET		=	\033[0m

#โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Directories and Files
#โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
SRCS_DIR	=	./src
OBJS_DIR	=	./obj
INC_DIR		=	./inc

# Trova automaticamente tutti i file .cpp nella directory src/
SRCS		:=	$(wildcard $(SRCS_DIR)/*.cpp)
# Trasforma src/xxx.cpp -> obj/xxx.o
OBJS		:=	$(patsubst $(SRCS_DIR)/%.cpp,$(OBJS_DIR)/%.o,$(SRCS))

#โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Compiler and Flags
#โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
NAME		=	Fixed
CXX			=	c++
CXXFLAGS	=	-Wall -Wextra -Werror -std=c++98 -I$(INC_DIR)
RM			=	rm -f

#โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Rules
#โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Default rule: Build the executable
all:			$(NAME)

# Create the object directory
$(OBJS_DIR):
			@echo "$(YELLOW)๐ Creating object directory...$(RESET)"
			@mkdir -p $(OBJS_DIR)

# Compile source files into object files
$(OBJS_DIR)/%.o: 	$(SRCS_DIR)/%.cpp | $(OBJS_DIR)
			@echo "$(BLUE)๐จ Compiling $<...$(RESET)"
			@$(CXX) $(CXXFLAGS) -c $< -o $@

# Link object files to create the executable
$(NAME):		$(OBJS)
				@echo "$(GREEN)๐ Linking objects and creating $(NAME)...$(RESET)"
				@$(CXX) $(CXXFLAGS) -o $(NAME) $(OBJS)
				@echo "$(RED)โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ$(RESET)"
				@echo "$(RED)โ  โโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโ   โ$(RESET)"
				@echo "$(RED)โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ$(RESET)"
				@echo "$(RED)โ  โโโโโโ  โโโ โโโโโโ โโโโโโ  โโโ  โโโ  โ$(RESET)"
				@echo "$(RED)โ  โโโโโโ  โโโ โโโโโโ โโโโโโ  โโโ  โโโ  โ$(RESET)"
				@echo "$(RED)โ  โโโ     โโโโโโโ โโโโโโโโโโโโโโโโโโโ  โ$(RESET)"
				@echo "$(RED)โ  โโโ     โโโโโโ  โโโโโโโโโโโโโโโโโโ   โ$(RESET)"
				@echo "$(RED)โฃโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโซ$(RESET)"
				@echo "\n$(MAGENTA)โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ$(RESET)"
				@echo "$(MAGENTA)โ                                          โ$(RESET)"
				@echo "$(MAGENTA)โ$(RED)                  FIXED                   $(MAGENTA)โ$(RESET)"
				@echo "$(MAGENTA)โ                                          โ$(RESET)"
				@echo "$(MAGENTA)โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ$(RESET)"
				@echo ""
				@echo "$(CYAN)โ Executable: $(NAME)$(RESET)"
				@echo "$(CYAN)โ Run with: ./$(NAME)$(RESET)\n"

# Clean object files
clean:
				@echo "$(RED)๐งน Cleaning object files...$(RESET)"
				@$(RM) $(OBJS)
				@$(RM) -r $(OBJS_DIR)
				@echo "$(GREEN)โ Clean complete!$(RESET)"

# Clean object files and remove the executable
fclean:			clean
				@echo "$(RED)๐๏ธ  Removing executable...$(RESET)"
				@$(RM) $(NAME)
				@echo "$(GREEN)โ Full clean complete!$(RESET)"

# Rebuild the project from scratch
re:				fclean all

# Show compilation info
info:
				@echo "$(CYAN)โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ$(RESET)"
				@echo "$(CYAN)โ         COMPILATION INFO               โ$(RESET)"
				@echo "$(CYAN)โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ$(RESET)"
				@echo "$(YELLOW)Executable:$(RESET)  $(NAME)"
				@echo "$(YELLOW)Compiler:$(RESET)    $(CXX)"
				@echo "$(YELLOW)Flags:$(RESET)       $(CXXFLAGS)"
				@echo "$(YELLOW)Sources:$(RESET)     $(SRCS)"
				@echo "$(YELLOW)Objects:$(RESET)     $(OBJS)"
				@echo ""

#โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Phony Targets
#โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
.PHONY:			all clean fclean re info
